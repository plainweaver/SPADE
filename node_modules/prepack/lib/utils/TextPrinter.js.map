{"version":3,"sources":["../../src/utils/TextPrinter.js"],"names":["indent","TextPrinter","constructor","printLine","abstractValueIds","Map","symbolIds","_printLine","_abstractValueIds","_symbolIds","_indent","_objects","Set","_propertyBindings","_environmentRecords","_bindings","_lexicalEnvironments","_symbols","_nest","_unnest","substring","length","_print","text","_printDefinition","id","constructorName","args","join","printGeneratorEntry","declared","type","data","metadata","value","undefined","describeValue","generator","printGenerator","generators","intrinsicName","describeExpression","dataTexts","unaryOperator","push","binaryOperator","logicalOperator","incrementor","prefix","binding","describeBinding","propertyBinding","describePropertyBinding","object","descriptor","describeDescriptor","thisArg","describeBaseValue","propRef","describeKey","state","usesThis","path","callFunctionRef","templateSource","propertyGetter","describeValues","metadataTexts","isPure","mutatesOnly","label","JSON","stringify","getName","pathConditions","getLength","Array","from","getAssumedConditions","print","realm","optimizedFunctions","realmGenerator","functionValue","effectsToApply","withEffectsAppliedInGlobalEnv","effects","nestedPrinter","printEffects","describeCompletion","result","SimpleNormalCompletion","ThrowCompletion","JoinedNormalAndAbruptCompletions","joinCondition","consequent","alternate","composedWith","name","modifiedProperties","size","keys","map","modifiedBindings","createdObjects","UndefinedValue","expression","t","isValidIdentifier","values","abstractValueName","get","printAbstractValue","kind","arg","objectValueName","has","FunctionValue","ProxyValue","getHash","printObjectValue","temporalAlias","NativeFunctionValue","BoundFunctionValue","$BoundTargetFunction","$BoundThis","$BoundArguments","ECMAScriptSourceFunctionValue","$ConstructorKind","$ThisMode","$FunctionKind","$HomeObject","$Strict","$FormalParameters","$Environment","describeLexicalEnvironment","$ProxyTarget","$ProxyHandler","getKind","originalSource","$OriginalSource","originalFlags","$OriginalFlags","numberData","$NumberData","stringData","$StringData","booleanData","$BooleanData","dateValue","$DateValue","len","$ArrayBufferByteLength","db","$ArrayBufferData","buf","$ViewedArrayBuffer","mapDataEntries","$MapData","describeMapEntries","weakMapDataEntries","$WeakMapData","setDataEntries","$SetData","describeSetEntries","weakSetDataEntries","$WeakSetData","properties","key","symbols","unknownProperty","$Prototype","SymbolValue","describeSymbol","PrimitiveValue","toDisplayString","ObjectValue","add","AbstractValue","set","entries","entry","$Key","$Value","desc","PropertyDescriptor","describePropertyDescriptor","InternalSlotDescriptor","describeInternalSlotDescriptor","AbstractJoinedDescriptor","describeAbstractJoinedDescriptor","writable","enumerable","configurable","Value","isArray","descriptor1","descriptor2","bindingName","describeEnvironmentRecord","environment","printBinding","isGlobal","mightHaveBeenCaptured","initialized","mutable","deletable","strict","hasLeaked","phiNode","propertyBindingName","printPropertyBinding","internalSlot","pathNode","environmentRecordName","DeclarativeEnvironmentRecord","FunctionEnvironmentRecord","ObjectEnvironmentRecord","GlobalEnvironmentRecord","printEnvironmentRecord","$ThisBindingStatus","$ThisValue","$FunctionObject","$NewTarget","frozen","bindings","Object","withEnvironment","$DeclarativeRecord","$VarNames","varName","$GlobalThisValue","EnvironmentRecord","lexicalEnvironmentName","_uid","printLexicalEnvironment","destroyed","parent","environmentRecord","symbolName","symbol","printSymbol","$Description"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport {\n  Completion,\n  SimpleNormalCompletion,\n  ThrowCompletion,\n  JoinedNormalAndAbruptCompletions,\n} from \"../completions.js\";\nimport type { Realm, Effects } from \"../realm.js\";\nimport type { Descriptor, PropertyBinding } from \"../types.js\";\nimport { PropertyDescriptor, InternalSlotDescriptor, AbstractJoinedDescriptor } from \"../descriptors.js\";\nimport {\n  EnvironmentRecord,\n  type Binding,\n  type LexicalEnvironment,\n  DeclarativeEnvironmentRecord,\n  FunctionEnvironmentRecord,\n  ObjectEnvironmentRecord,\n  GlobalEnvironmentRecord,\n} from \"../environment.js\";\nimport {\n  PrimitiveValue,\n  AbstractValue,\n  ObjectValue,\n  FunctionValue,\n  ECMAScriptSourceFunctionValue,\n  NativeFunctionValue,\n  BoundFunctionValue,\n  SymbolValue,\n  ProxyValue,\n  Value,\n  UndefinedValue,\n} from \"../values/index.js\";\nimport invariant from \"../invariant.js\";\nimport {\n  Printer,\n  Generator,\n  type OperationDescriptorType,\n  type CustomGeneratorEntryType,\n  type OperationDescriptorData,\n} from \"./generator.js\";\nimport * as t from \"@babel/types\";\n\nconst indent = \"  \";\n\nexport class TextPrinter implements Printer {\n  constructor(\n    printLine: string => void,\n    abstractValueIds?: Map<AbstractValue, number> = new Map(),\n    symbolIds?: Map<SymbolValue, number> = new Map()\n  ) {\n    this._printLine = printLine;\n    this._abstractValueIds = abstractValueIds;\n    this._symbolIds = symbolIds;\n    this._indent = \"\";\n    this._objects = new Set();\n    this._propertyBindings = new Set();\n    this._environmentRecords = new Set();\n    this._bindings = new Set();\n    this._lexicalEnvironments = new Set();\n    this._symbols = new Set();\n  }\n\n  _printLine: string => void;\n  _abstractValueIds: Map<AbstractValue, number>;\n  _symbolIds: Map<SymbolValue, number>;\n  _indent: string;\n  _objects: Set<ObjectValue>;\n  _propertyBindings: Set<PropertyBinding>;\n  _environmentRecords: Set<EnvironmentRecord>;\n  _bindings: Set<Binding>;\n  _lexicalEnvironments: Set<LexicalEnvironment>;\n  _symbols: Set<SymbolValue>;\n\n  _nest(): void {\n    this._indent += indent;\n  }\n  _unnest(): void {\n    this._indent = this._indent.substring(0, this._indent.length - indent.length);\n  }\n\n  _print(text: string): void {\n    this._printLine(this._indent + text);\n  }\n\n  _printDefinition(id: string, constructorName: string, args: Array<string>) {\n    this._print(`* ${id} = ${constructorName}(${args.join(\", \")})`);\n  }\n\n  printGeneratorEntry(\n    declared: void | AbstractValue | ObjectValue,\n    type: OperationDescriptorType | CustomGeneratorEntryType,\n    args: Array<Value>,\n    data: OperationDescriptorData,\n    metadata: { isPure: boolean, mutatesOnly: void | Array<Value> }\n  ): void {\n    switch (type) {\n      case \"DO_WHILE\":\n        invariant(data.value !== undefined);\n        this._print(`do while ${this.describeValue(data.value)}`);\n        this._nest();\n        const generator = data.generator;\n        invariant(generator !== undefined);\n        this.printGenerator(generator, \"body\");\n        this._unnest();\n        break;\n      case \"JOIN_GENERATORS\":\n        invariant(args.length === 1);\n        this._print(`if ${this.describeValue(args[0])}`);\n        this._nest();\n        const generators = data.generators;\n        invariant(generators !== undefined && generators.length === 2);\n        this.printGenerator(generators[0], \"then\");\n        this.printGenerator(generators[1], \"else\");\n        this._unnest();\n        break;\n      default:\n        let text;\n        if (declared !== undefined) {\n          invariant(declared.intrinsicName !== undefined);\n          text = `${this.describeExpression(declared.intrinsicName)} := `;\n        } else {\n          text = \"\";\n        }\n        text += type;\n\n        const dataTexts = [];\n        if (data.unaryOperator !== undefined) dataTexts.push(`unary ${data.unaryOperator}`); // used by UNARY_EXPRESSION\n        if (data.binaryOperator !== undefined) dataTexts.push(`binary ${data.binaryOperator}`); // used by BINARY_EXPRESSION\n        if (data.logicalOperator !== undefined) dataTexts.push(`logical ${data.logicalOperator}`); // used by LOGICAL_EXPRESSION\n        if (data.incrementor !== undefined) dataTexts.push(`incrementor ${data.incrementor}`); // used by UPDATE_INCREMENTOR\n        if (data.prefix !== undefined) dataTexts.push(\"prefix\"); // used by UNARY_EXPRESSION\n        if (data.binding !== undefined) dataTexts.push(`binding ${this.describeBinding(data.binding)}`); // used by GET_BINDING\n        if (data.propertyBinding !== undefined)\n          dataTexts.push(`property binding ${this.describePropertyBinding(data.propertyBinding)}`); // used by LOGICAL_PROPERTY_ASSIGNMENT\n        if (data.object !== undefined) dataTexts.push(`object ${this.describeValue(data.object)}`); // used by DEFINE_PROPERTY\n        if (data.descriptor !== undefined) dataTexts.push(`desc ${this.describeDescriptor(data.descriptor)}`); // used by DEFINE_PROPERTY\n        if (data.value !== undefined) dataTexts.push(`value ${this.describeValue(data.value)}`); // used by DO_WHILE, CONDITIONAL_PROPERTY_ASSIGNMENT, LOGICAL_PROPERTY_ASSIGNMENT, LOCAL_ASSIGNMENT, CONDITIONAL_THROW, EMIT_PROPERTY_ASSIGNMENT\n        if (data.id !== undefined) dataTexts.push(`id ${this.describeExpression(data.id)}`); // used by IDENTIFIER\n        if (data.thisArg !== undefined) dataTexts.push(`this arg ${this.describeBaseValue(data.thisArg)}`); // used by CALL_BAILOUT\n        if (data.propRef !== undefined) dataTexts.push(`prop ref ${this.describeKey(data.propRef)}`); // used by CALL_BAILOUT, and then only if string\n        if (data.state !== undefined) dataTexts.push(`state ${data.state}`); // used by PROPERTY_INVARIANT\n        if (data.usesThis !== undefined) dataTexts.push(`usesThis`); // used by FOR_STATEMENT_FUNC\n        if (data.path !== undefined) dataTexts.push(`path ${this.describeValue(data.path)}`); // used by PROPERTY_ASSIGNMENT, CONDITIONAL_PROPERTY_ASSIGNMENT\n        if (data.callFunctionRef !== undefined)\n          dataTexts.push(`call function ref ${this.describeExpression(data.callFunctionRef)}`); // used by EMIT_CALL and EMIT_CALL_AND_CAPTURE_RESULT\n        if (data.templateSource !== undefined)\n          dataTexts.push(`template source ${this.describeExpression(data.templateSource)}`); // used by ABSTRACT_FROM_TEMPLATE\n        if (data.propertyGetter !== undefined) dataTexts.push(`property getter ${data.propertyGetter}`); // used by ABSTRACT_OBJECT_GET\n\n        // TODO:\n        // appendLastToInvariantOperationDescriptor?: OperationDescriptor, // used by INVARIANT\n        // concreteComparisons?: Array<Value>, // used by FULL_INVARIANT_ABSTRACT\n        // boundName?: BabelNodeIdentifier, // used by FOR_IN\n        // lh?: BabelNodeVariableDeclaration, // used by FOR_IN\n        // quasis?: Array<BabelNodeTemplateElement>, // used by REACT_SSR_TEMPLATE_LITERAL\n        // typeComparisons?: Set<typeof Value>, // used by FULL_INVARIANT_ABSTRACT\n        // violationConditionOperationDescriptor?: OperationDescriptor, // used by INVARIANT\n        if (dataTexts.length > 0) text += `<${dataTexts.join(\"; \")}>`;\n\n        if (args.length > 0) text += `(${this.describeValues(args)})`;\n\n        const metadataTexts = [];\n        if (metadata.isPure) metadataTexts.push(\"isPure\");\n        if (metadata.mutatesOnly !== undefined && metadata.mutatesOnly.length > 0)\n          metadataTexts.push(`mutates only: [${this.describeValues(metadata.mutatesOnly)}]`);\n        if (metadataTexts.length > 0) text += `[${metadataTexts.join(\"; \")}]`;\n\n        this._print(text);\n        break;\n    }\n  }\n\n  printGenerator(generator: Generator, label?: string = \"(entry point)\"): void {\n    this._print(`${label}: ${JSON.stringify(generator.getName())}`);\n    this._nest();\n    if (generator.pathConditions.getLength() > 0)\n      this._print(\n        `path conditions ${this.describeValues(Array.from(generator.pathConditions.getAssumedConditions()))}`\n      );\n    generator.print(this);\n    this._unnest();\n  }\n\n  print(realm: Realm, optimizedFunctions: Map<FunctionValue, Generator>): void {\n    const realmGenerator = realm.generator;\n    if (realmGenerator !== undefined) this.printGenerator(realmGenerator);\n    for (const [functionValue, generator] of optimizedFunctions) {\n      const effectsToApply = generator.effectsToApply;\n      invariant(effectsToApply !== undefined);\n      this._print(`=== optimized function ${this.describeValue(functionValue)}`);\n      realm.withEffectsAppliedInGlobalEnv(effects => {\n        const nestedPrinter = new TextPrinter(this._printLine, this._abstractValueIds, this._symbolIds);\n        nestedPrinter.printEffects(effects, generator);\n        return nestedPrinter; // not needed, but withEffectsAppliedInGlobalEnv has an unmotivated invariant that the result must not be undefined\n      }, effectsToApply);\n    }\n  }\n\n  describeCompletion(result: Completion): string {\n    const args = [];\n    if (result instanceof SimpleNormalCompletion) args.push(`value ${this.describeValue(result.value)}`);\n    else if (result instanceof ThrowCompletion) args.push(`value ${this.describeValue(result.value)}`);\n    else {\n      invariant(result instanceof JoinedNormalAndAbruptCompletions);\n      args.push(`join condition ${this.describeValue(result.joinCondition)}`);\n      args.push(`consequent ${this.describeCompletion(result.consequent)}`);\n      args.push(`alternate ${this.describeCompletion(result.alternate)}`);\n      if (result.composedWith !== undefined) args.push(`composed with ${this.describeCompletion(result.composedWith)}`);\n    }\n    return `${result.constructor.name}(${args.join(\", \")})`;\n  }\n\n  printEffects(effects: Effects, generator?: Generator): void {\n    this._nest();\n    this.printGenerator(generator || effects.generator);\n    // skip effects.generator\n    if (effects.modifiedProperties.size > 0)\n      this._print(\n        `modified property bindings: [${Array.from(effects.modifiedProperties.keys())\n          .map(propertyBinding => this.describePropertyBinding(propertyBinding))\n          .join(\", \")}]`\n      );\n    if (effects.modifiedBindings.size > 0)\n      this._print(\n        `modified bindings: [${Array.from(effects.modifiedBindings.keys())\n          .map(binding => this.describeBinding(binding))\n          .join(\", \")}]`\n      );\n    if (effects.createdObjects.size > 0)\n      this._print(\n        `created objects: [${Array.from(effects.createdObjects)\n          .map(object => this.describeValue(object))\n          .join(\", \")}]`\n      );\n    if (!(effects.result instanceof UndefinedValue)) this._print(`result: ${this.describeCompletion(effects.result)}`);\n    this._unnest();\n  }\n\n  describeExpression(expression: string): string {\n    if (t.isValidIdentifier(expression)) return expression;\n    else return \"@\" + JSON.stringify(expression);\n  }\n\n  describeValues<V: Value>(values: Array<V>): string {\n    return values.map(value => this.describeValue(value)).join(\", \");\n  }\n\n  abstractValueName(value: AbstractValue): string {\n    const id = this._abstractValueIds.get(value);\n    invariant(id !== undefined);\n    return `value#${id}`;\n  }\n\n  printAbstractValue(value: AbstractValue): void {\n    invariant(value.intrinsicName === undefined);\n    let kind = value.kind;\n    // TODO: I'd expect kind to be defined in this situation; however, it's not defined for test ForInStatement4.js\n    // invariant(kind !== undefined);\n    if (kind === undefined) kind = \"(no kind)\";\n    this._printDefinition(\n      this.abstractValueName(value),\n      this.describeExpression(kind),\n      value.args.map(arg => this.describeValue(arg))\n    );\n  }\n\n  objectValueName(value: ObjectValue): string {\n    invariant(this._objects.has(value));\n    let name;\n    if (value instanceof FunctionValue) name = \"func\";\n    else if (value instanceof ProxyValue) name = \"proxy\";\n    else name = \"object\";\n    return `${name}#${value.getHash()}`;\n  }\n\n  printObjectValue(value: ObjectValue): void {\n    const args = [];\n\n    if (value.temporalAlias !== undefined) args.push(`temporalAlias ${this.describeValue(value.temporalAlias)}`);\n\n    if (value instanceof FunctionValue) {\n      if (value instanceof NativeFunctionValue) {\n        // TODO: This shouldn't happen; all native function values should be intrinsics\n      } else if (value instanceof BoundFunctionValue) {\n        args.push(`$BoundTargetFunction ${this.describeValue(value.$BoundTargetFunction)}`);\n        args.push(`$BoundThis ${this.describeValue(value.$BoundThis)}`);\n        args.push(`$BoundArguments [${this.describeValues(value.$BoundArguments)}]`);\n      } else {\n        invariant(value instanceof ECMAScriptSourceFunctionValue);\n        args.push(`$ConstructorKind ${value.$ConstructorKind}`);\n        args.push(`$ThisMode ${value.$ThisMode}`);\n        args.push(`$FunctionKind ${value.$FunctionKind}`);\n        if (value.$HomeObject !== undefined) args.push(`$HomeObject ${this.describeValue(value.$HomeObject)}`);\n\n        // TODO: $Strict should always be defined according to its flow type signature, however, there are some tests where it's not\n        if (value.$Strict) args.push(`$Strict`);\n        args.push(`$FormalParameters ${value.$FormalParameters.length}`);\n        // TODO: pretty-print $ECMAScriptCode\n\n        // TODO: $Environment should always be defined according to its flow type signature, however, it's not in test ConcreteModel2.js\n        if (value.$Environment) args.push(`$Environment ${this.describeLexicalEnvironment(value.$Environment)}`);\n      }\n    } else if (value instanceof ProxyValue) {\n      args.push(`$ProxyTarget ${this.describeValue(value.$ProxyTarget)}`);\n      args.push(`$ProxyHandler ${this.describeValue(value.$ProxyHandler)}`);\n    } else {\n      const kind = value.getKind();\n      if (kind !== \"Object\") args.push(`kind ${kind}`);\n      switch (kind) {\n        case \"RegExp\":\n          const originalSource = value.$OriginalSource;\n          invariant(originalSource !== undefined);\n          args.push(`$OriginalSource ${originalSource}`);\n          const originalFlags = value.$OriginalFlags;\n          invariant(originalFlags !== undefined);\n          args.push(`$OriginalFlags ${originalFlags}`);\n          break;\n        case \"Number\":\n          const numberData = value.$NumberData;\n          invariant(numberData !== undefined);\n          args.push(`$NumberData ${this.describeValue(numberData)}`);\n          break;\n        case \"String\":\n          const stringData = value.$StringData;\n          invariant(stringData !== undefined);\n          args.push(`$StringData ${this.describeValue(stringData)}`);\n          break;\n        case \"Boolean\":\n          const booleanData = value.$BooleanData;\n          invariant(booleanData !== undefined);\n          args.push(`$BooleanData ${this.describeValue(booleanData)}`);\n          break;\n        case \"Date\":\n          const dateValue = value.$DateValue;\n          invariant(dateValue !== undefined);\n          args.push(`$DateValue ${this.describeValue(dateValue)}`);\n          break;\n        case \"ArrayBuffer\":\n          const len = value.$ArrayBufferByteLength;\n          invariant(len !== undefined);\n          args.push(`$ArrayBufferByteLength ${len}`);\n          const db = value.$ArrayBufferData;\n          invariant(db !== undefined);\n          if (db !== null) args.push(`$ArrayBufferData [${db.join(\", \")}]`);\n          break;\n        case \"Float32Array\":\n        case \"Float64Array\":\n        case \"Int8Array\":\n        case \"Int16Array\":\n        case \"Int32Array\":\n        case \"Uint8Array\":\n        case \"Uint16Array\":\n        case \"Uint32Array\":\n        case \"Uint8ClampedArray\":\n        case \"DataView\":\n          const buf = value.$ViewedArrayBuffer;\n          invariant(buf !== undefined);\n          args.push(`$ViewedArrayBuffer ${this.describeValue(buf)}`);\n          break;\n        case \"Map\":\n          const mapDataEntries = value.$MapData;\n          invariant(mapDataEntries !== undefined);\n          args.push(`$MapData [${this.describeMapEntries(mapDataEntries)}]`);\n          break;\n        case \"WeakMap\":\n          const weakMapDataEntries = value.$WeakMapData;\n          invariant(weakMapDataEntries !== undefined);\n          args.push(`$WeakMapData [${this.describeMapEntries(weakMapDataEntries)}]`);\n          break;\n        case \"Set\":\n          const setDataEntries = value.$SetData;\n          invariant(setDataEntries !== undefined);\n          args.push(`$SetData [${this.describeSetEntries(setDataEntries)}]`);\n          break;\n        case \"WeakSet\":\n          const weakSetDataEntries = value.$WeakSetData;\n          invariant(weakSetDataEntries !== undefined);\n          args.push(`$WeakSetData [${this.describeSetEntries(weakSetDataEntries)}]`);\n          break;\n        case \"ReactElement\":\n        case \"Object\":\n        case \"Array\":\n          break;\n        default:\n          invariant(false);\n      }\n    }\n\n    // properties\n    if (value.properties.size > 0) {\n      args.push(\n        `properties [${Array.from(value.properties.keys())\n          .map(key => this.describeKey(key))\n          .join(\", \")}]`\n      );\n    }\n\n    // symbols\n    if (value.symbols.size > 0) {\n      args.push(\n        `symbols [${Array.from(value.symbols.keys())\n          .map(key => this.describeKey(key))\n          .join(\", \")}]`\n      );\n    }\n\n    const unknownProperty = value.unknownProperty;\n    if (unknownProperty !== undefined) args.push(`unknown property`);\n\n    if (value.$Prototype !== undefined) args.push(`$Prototype ${this.describeValue(value.$Prototype)}`);\n\n    this._printDefinition(this.objectValueName(value), value.constructor.name, args);\n\n    // jull pull on property bindings to get them emitting\n    for (const propertyBinding of value.properties.values()) this.describePropertyBinding(propertyBinding);\n    for (const propertyBinding of value.symbols.values()) this.describePropertyBinding(propertyBinding);\n    if (unknownProperty !== undefined) this.describePropertyBinding(unknownProperty);\n  }\n\n  describeValue(value: Value): string {\n    if (value.intrinsicName !== undefined) return this.describeExpression(value.intrinsicName);\n    if (value instanceof SymbolValue) return this.describeSymbol(value);\n    if (value instanceof PrimitiveValue) return value.toDisplayString();\n    if (value instanceof ObjectValue) {\n      if (!this._objects.has(value)) {\n        this._objects.add(value);\n        this.printObjectValue(value);\n      }\n      return this.objectValueName(value);\n    } else {\n      invariant(value instanceof AbstractValue, value.constructor.name);\n      if (!this._abstractValueIds.has(value)) {\n        this._abstractValueIds.set(value, this._abstractValueIds.size);\n        this.printAbstractValue(value);\n      }\n      return this.abstractValueName(value);\n    }\n  }\n\n  describeMapEntries(entries: Array<{ $Key: void | Value, $Value: void | Value }>): string {\n    return entries\n      .map(entry => {\n        const args = [];\n        if (entry.$Key !== undefined) args.push(`$Key ${this.describeValue(entry.$Key)}`);\n        if (entry.$Value !== undefined) args.push(`$Value ${this.describeValue(entry.$Value)}`);\n        return `{${args.join(\", \")}}`;\n      })\n      .join(\", \");\n  }\n\n  describeSetEntries(entries: Array<void | Value>): string {\n    return entries.map(entry => (entry === undefined ? \"(undefined)\" : this.describeValue(entry))).join(\", \");\n  }\n\n  describeDescriptor(desc: Descriptor): string {\n    if (desc instanceof PropertyDescriptor) return this.describePropertyDescriptor(desc);\n    else if (desc instanceof InternalSlotDescriptor) return this.describeInternalSlotDescriptor(desc);\n    else {\n      invariant(desc instanceof AbstractJoinedDescriptor, desc.constructor.name);\n      return this.describeAbstractJoinedDescriptor(desc);\n    }\n  }\n\n  describePropertyDescriptor(desc: PropertyDescriptor): string {\n    const args = [];\n    if (desc.writable) args.push(\"writable\");\n    if (desc.enumerable) args.push(\"enumerable\");\n    if (desc.configurable) args.push(\"configurable\");\n    if (desc.value !== undefined) args.push(`value ${this.describeValue(desc.value)}`);\n    if (desc.get !== undefined) args.push(`get ${this.describeValue(desc.get)}`);\n    if (desc.set !== undefined) args.push(`set ${this.describeValue(desc.set)}`);\n    return `PropertyDescriptor(${args.join(\", \")})`;\n  }\n\n  describeInternalSlotDescriptor(desc: InternalSlotDescriptor): string {\n    const args = [];\n    if (desc.value instanceof Value) args.push(`value ${this.describeValue(desc.value)}`);\n    else if (Array.isArray(desc.value)) args.push(`some array`); // TODO\n    return `InternalSlotDescriptor(${args.join(\", \")})`;\n  }\n\n  describeAbstractJoinedDescriptor(desc: AbstractJoinedDescriptor): string {\n    const args = [];\n    args.push(`join condition ${this.describeValue(desc.joinCondition)}`);\n    if (desc.descriptor1 !== undefined) args.push(`descriptor1 ${this.describeDescriptor(desc.descriptor1)}`);\n    if (desc.descriptor2 !== undefined) args.push(`descriptor2 ${this.describeDescriptor(desc.descriptor2)}`);\n    return `AbstractJoinedDescriptor(${args.join(\", \")})`;\n  }\n\n  bindingName(binding: Binding): string {\n    invariant(this._bindings.has(binding));\n    return `${this.describeEnvironmentRecord(binding.environment)}.${this.describeExpression(binding.name)}`;\n  }\n\n  printBinding(binding: Binding): void {\n    const args = [];\n    if (binding.isGlobal) args.push(\"is global\");\n    if (binding.mightHaveBeenCaptured) args.push(\"might have been captured\");\n    if (binding.initialized) args.push(\"initialized\");\n    if (binding.mutable) args.push(\"mutable\");\n    if (binding.deletable) args.push(\"deletable\");\n    if (binding.strict) args.push(\"strict\");\n    if (binding.hasLeaked) args.push(\"has leaked\");\n    if (binding.value !== undefined) args.push(`value ${this.describeValue(binding.value)})`);\n    if (binding.phiNode !== undefined) args.push(`phi node ${this.describeValue(binding.phiNode)}`);\n    this._printDefinition(this.bindingName(binding), \"Binding\", args);\n  }\n\n  describeBinding(binding: Binding): string {\n    if (!this._bindings.has(binding)) {\n      this._bindings.add(binding);\n      this.printBinding(binding);\n    }\n    return this.bindingName(binding);\n  }\n\n  describeKey(key: void | string | Value): string {\n    if (key === undefined) return \"(undefined)\";\n    else if (typeof key === \"string\") return this.describeExpression(key);\n    else {\n      invariant(key instanceof Value);\n      return this.describeValue(key);\n    }\n  }\n\n  propertyBindingName(propertyBinding: PropertyBinding): string {\n    return `${this.describeValue(propertyBinding.object)}.${this.describeKey(propertyBinding.key)}`;\n  }\n\n  printPropertyBinding(propertyBinding: PropertyBinding): void {\n    const args = [];\n    if (propertyBinding.internalSlot) args.push(\"internal slot\");\n    if (propertyBinding.descriptor !== undefined)\n      args.push(`descriptor ${this.describeDescriptor(propertyBinding.descriptor)}`);\n    if (propertyBinding.pathNode !== undefined) args.push(`path node ${this.describeValue(propertyBinding.pathNode)}`);\n    this._printDefinition(this.propertyBindingName(propertyBinding), \"PropertyBinding\", args);\n  }\n\n  describePropertyBinding(propertyBinding: PropertyBinding): string {\n    if (!this._propertyBindings.has(propertyBinding)) {\n      this._propertyBindings.add(propertyBinding);\n      this.printPropertyBinding(propertyBinding);\n    }\n    return this.propertyBindingName(propertyBinding);\n  }\n\n  environmentRecordName(environment: EnvironmentRecord): string {\n    invariant(this._environmentRecords.has(environment));\n    let name;\n    if (environment instanceof DeclarativeEnvironmentRecord) {\n      name = environment instanceof FunctionEnvironmentRecord ? \"funEnv\" : \"declEnv\";\n    } else if (environment instanceof ObjectEnvironmentRecord) {\n      name = \"objEnv\";\n    } else {\n      invariant(environment instanceof GlobalEnvironmentRecord);\n      name = \"globEnv\";\n    }\n    return `${name}#${environment.id}`;\n  }\n\n  printEnvironmentRecord(environment: EnvironmentRecord): void {\n    const args = [];\n    if (environment instanceof DeclarativeEnvironmentRecord) {\n      if (environment instanceof FunctionEnvironmentRecord) {\n        args.push(`$ThisBindingStatus ${environment.$ThisBindingStatus}`);\n        // TODO: $ThisValue should always be defined according to its flow type signature, however, it's not for test ObjectAssign9.js\n        if (environment.$ThisValue !== undefined) args.push(`$ThisValue ${this.describeValue(environment.$ThisValue)}`);\n        if (environment.$HomeObject !== undefined)\n          args.push(`$HomeObject ${this.describeValue(environment.$HomeObject)}`);\n        args.push(`$FunctionObject ${this.describeValue(environment.$FunctionObject)}`);\n      }\n      if (environment.$NewTarget !== undefined) args.push(`$NewTarget ${this.describeValue(environment.$NewTarget)}`);\n      if (environment.frozen) args.push(\"frozen\");\n      const bindings = Object.keys(environment.bindings);\n      if (bindings.length > 0)\n        args.push(\n          `bindings [${Object.keys(environment.bindings)\n            .map(key => this.describeKey(key))\n            .join(\", \")}]`\n        );\n    } else if (environment instanceof ObjectEnvironmentRecord) {\n      args.push(`object ${this.describeValue(environment.object)}`);\n      if (environment.withEnvironment) args.push(\"with environment\");\n    } else if (environment instanceof GlobalEnvironmentRecord) {\n      args.push(`$DeclarativeRecord ${this.describeEnvironmentRecord(environment.$DeclarativeRecord)}`);\n      args.push(`$ObjectRecord ${this.describeEnvironmentRecord(environment.$DeclarativeRecord)}`);\n      if (environment.$VarNames.length > 0)\n        args.push(`$VarNames [${environment.$VarNames.map(varName => this.describeExpression(varName)).join(\", \")}]`);\n      args.push(`$GlobalThisValue ${this.describeValue(environment.$GlobalThisValue)}`);\n    }\n    this._printDefinition(this.environmentRecordName(environment), environment.constructor.name, args);\n\n    // pull on bindings to get them emitted\n    if (environment instanceof DeclarativeEnvironmentRecord)\n      for (const bindingName in environment.bindings) this.describeBinding(environment.bindings[bindingName]);\n  }\n\n  describeEnvironmentRecord(environment: EnvironmentRecord): string {\n    if (!this._environmentRecords.has(environment)) {\n      this._environmentRecords.add(environment);\n      this.printEnvironmentRecord(environment);\n    }\n    return this.environmentRecordName(environment);\n  }\n\n  describeBaseValue(value: void | EnvironmentRecord | Value): string {\n    if (value === undefined) return \"(undefined)\";\n    else if (value instanceof Value) return this.describeValue(value);\n    invariant(value instanceof EnvironmentRecord);\n    return this.describeEnvironmentRecord(value);\n  }\n\n  lexicalEnvironmentName(environment: LexicalEnvironment): string {\n    invariant(this._lexicalEnvironments.has(environment));\n    return `lexEnv#${environment._uid}`;\n  }\n\n  printLexicalEnvironment(environment: LexicalEnvironment): void {\n    const args = [];\n    if (environment.destroyed) args.push(\"destroyed\");\n    if (environment.parent !== null) args.push(`parent ${this.describeLexicalEnvironment(environment.parent)}`);\n    args.push(`environment record ${this.describeEnvironmentRecord(environment.environmentRecord)}`);\n    this._printDefinition(this.lexicalEnvironmentName(environment), \"LexicalEnvironment\", args);\n  }\n\n  describeLexicalEnvironment(environment: LexicalEnvironment): string {\n    if (!this._lexicalEnvironments.has(environment)) {\n      this._lexicalEnvironments.add(environment);\n      this.printLexicalEnvironment(environment);\n    }\n    return this.lexicalEnvironmentName(environment);\n  }\n\n  symbolName(symbol: SymbolValue): string {\n    const id = this._symbolIds.get(symbol);\n    invariant(id !== undefined);\n    return `symbol#${id}`;\n  }\n\n  printSymbol(symbol: SymbolValue): void {\n    const args = [];\n    if (symbol.$Description) args.push(`$Description ${this.describeValue(symbol.$Description)}`);\n    this._printDefinition(this.symbolName(symbol), \"Symbol\", args);\n  }\n\n  describeSymbol(symbol: SymbolValue): string {\n    if (!this._symbolIds.has(symbol)) {\n      this._symbolIds.set(symbol, this._symbolIds.size);\n    }\n    if (!this._symbols.has(symbol)) {\n      this._symbols.add(symbol);\n      this.printSymbol(symbol);\n    }\n    return this.symbolName(symbol);\n  }\n}\n"],"file":"TextPrinter.js"}