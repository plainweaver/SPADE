{"version":3,"sources":["../../src/values/FunctionValue.js"],"names":["FunctionValue","ObjectValue","constructor","realm","intrinsicName","intrinsics","FunctionPrototype","getName","Error","getKind","getLength","binding","properties","get","desc","descriptor","value","throwIfNotConcrete","$Realm","NumberValue","undefined","hasDefaultLength","getDebugName"],"mappings":";;;;;;;AAcA;;AACA;;;;AAfA;;;;;;;;;AAiBA;AACe,MAAMA,aAAN,SAA4BC,kBAA5B,CAAwC;AACrDC,EAAAA,WAAW,CAACC,KAAD,EAAeC,aAAf,EAAuC;AAChD,UAAMD,KAAN,EAAaA,KAAK,CAACE,UAAN,CAAiBC,iBAA9B,EAAiDF,aAAjD;AACD;;AAcDG,EAAAA,OAAO,GAAW;AAChB,UAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;AACD;;AAEDC,EAAAA,OAAO,GAAe;AACpB,WAAO,UAAP;AACD;;AAEDC,EAAAA,SAAS,GAAkB;AACzB,QAAIC,OAAO,GAAG,KAAKC,UAAL,CAAgBC,GAAhB,CAAoB,QAApB,CAAd;AACA,4BAAUF,OAAV;AACA,QAAIG,IAAI,GAAGH,OAAO,CAACI,UAAnB;AACA,4BAAUD,IAAV;AACA,QAAIE,KAAK,GAAGF,IAAI,CAACG,kBAAL,CAAwB,KAAKC,MAA7B,EAAqCF,KAAjD;AACA,QAAI,EAAEA,KAAK,YAAYG,kBAAnB,CAAJ,EAAqC,OAAOC,SAAP;AACrC,WAAOJ,KAAK,CAACA,KAAb;AACD;;AAEDK,EAAAA,gBAAgB,GAAY;AAC1B,4BAAU,KAAV,EAAiB,kCAAjB;AACD;;AAEDC,EAAAA,YAAY,GAAW;AACrB,WAAO,MAAMA,YAAN,MAAwB,KAAKf,OAAL,EAA/B;AACD;;AAzCoD","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport type { PathConditions, ObjectKind } from \"../types.js\";\nimport type { LexicalEnvironment } from \"../environment.js\";\nimport type { Realm } from \"../realm.js\";\nimport { ObjectValue, NumberValue } from \"./index.js\";\nimport invariant from \"../invariant.js\";\n\n/* Abstract base class for all function objects */\nexport default class FunctionValue extends ObjectValue {\n  constructor(realm: Realm, intrinsicName?: string) {\n    super(realm, realm.intrinsics.FunctionPrototype, intrinsicName);\n  }\n\n  pathConditionDuringDeclaration: PathConditions | void;\n  $Environment: LexicalEnvironment;\n  $ScriptOrModule: any;\n\n  // Indicates whether this function has been referenced by a __residual call.\n  // If true, the serializer will check that the function does not access any\n  // identifiers defined outside of the local scope.\n  isResidual: void | true;\n\n  // Allows for residual function with inference of parameters\n  isUnsafeResidual: void | true;\n\n  getName(): string {\n    throw new Error(\"Abstract method\");\n  }\n\n  getKind(): ObjectKind {\n    return \"Function\";\n  }\n\n  getLength(): void | number {\n    let binding = this.properties.get(\"length\");\n    invariant(binding);\n    let desc = binding.descriptor;\n    invariant(desc);\n    let value = desc.throwIfNotConcrete(this.$Realm).value;\n    if (!(value instanceof NumberValue)) return undefined;\n    return value.value;\n  }\n\n  hasDefaultLength(): boolean {\n    invariant(false, \"abstract method; please override\");\n  }\n\n  getDebugName(): string {\n    return super.getDebugName() || this.getName();\n  }\n}\n"],"file":"FunctionValue.js"}