{"version":3,"sources":["../../../src/intrinsics/fb-www/fb-mocks.js"],"names":["fbMagicGlobalFunctions","fbMagicGlobalObjects","createBabelHelpers","realm","global","babelHelpersValue","ObjectValue","intrinsics","ObjectPrototype","objectAssign","Object","objectCreate","inheritsValue","NativeFunctionValue","undefined","context","subClass","superClass","objectAssignCall","$Call","superClassPrototype","objectCreateCall","newPrototype","Properties","Set","defineNativeProperty","writable","enumerable","configurable","intrinsicName","createObjectWithoutProperties","obj","keys","removeKeys","key","StringValue","NumberValue","add","value","newObject","Create","ObjectCreate","propName","binding","properties","has","descriptor","throwIfNotConcrete","objectWithoutPropertiesValue","AbstractObjectValue","AbstractValue","ArrayValue","mightBeObject","values","isTop","isPartialObject","temporalArgs","temporalConfig","skipInvariant","isPure","createTemporalFromBuildFunction","template","ValuesDomain","makeSimple","taggedTemplateLiteralLooseValue","strings","raw","functionBind","FunctionPrototype","$DefineOwnProperty","PropertyDescriptor","refuseSerialization","createMagicGlobalFunction","functionName","args","val","FunctionValue","createMagicGlobalObject","objectName","globalObject","createAbstractObject","kind","createBootloader","bootloader","loadModules","$Realm","generator","createFbMocks","false"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow */\n\nimport type { Realm } from \"../../realm.js\";\nimport { ValuesDomain } from \"../../domains/index.js\";\nimport {\n  ArrayValue,\n  AbstractValue,\n  FunctionValue,\n  AbstractObjectValue,\n  NativeFunctionValue,\n  ObjectValue,\n  StringValue,\n  NumberValue,\n} from \"../../values/index.js\";\nimport { Create } from \"../../singletons.js\";\nimport { Get } from \"../../methods/index.js\";\nimport invariant from \"../../invariant.js\";\nimport { Properties } from \"../../singletons.js\";\nimport { forEachArrayValue } from \"../../react/utils.js\";\nimport { createOperationDescriptor } from \"../../utils/generator.js\";\nimport { PropertyDescriptor } from \"../../descriptors.js\";\n\nconst fbMagicGlobalFunctions = [\n  \"asset\",\n  \"cx\",\n  \"cssVar\",\n  \"csx\",\n  \"errorDesc\",\n  \"errorHelpCenterID\",\n  \"errorSummary\",\n  \"gkx\",\n  \"glyph\",\n  \"ifRequired\",\n  \"ix\",\n  \"fbglyph\",\n  \"requireWeak\",\n  \"xuiglyph\",\n];\n\nconst fbMagicGlobalObjects = [\"JSResource\", \"fbt\"];\n\nfunction createBabelHelpers(realm: Realm, global: ObjectValue | AbstractObjectValue) {\n  let babelHelpersValue = new ObjectValue(realm, realm.intrinsics.ObjectPrototype, `babelHelpers`, true);\n  let objectAssign = Get(realm, realm.intrinsics.Object, \"assign\");\n  let objectCreate = Get(realm, realm.intrinsics.Object, \"create\");\n\n  //babelHelpers.objectWithoutProperties\n  let inheritsValue = new NativeFunctionValue(realm, undefined, `inherits`, 2, (context, [subClass, superClass]) => {\n    invariant(objectAssign instanceof NativeFunctionValue);\n    let objectAssignCall = objectAssign.$Call;\n    invariant(objectAssignCall !== undefined);\n    objectAssignCall(realm.intrinsics.undefined, [subClass, superClass]);\n\n    invariant(superClass instanceof ObjectValue);\n    let superClassPrototype = Get(realm, superClass, \"prototype\");\n    invariant(objectCreate instanceof NativeFunctionValue);\n    let objectCreateCall = objectCreate.$Call;\n    invariant(typeof objectCreateCall === \"function\");\n    let newPrototype = objectCreateCall(realm.intrinsics.undefined, [superClassPrototype]);\n\n    invariant(subClass instanceof ObjectValue);\n    invariant(newPrototype instanceof ObjectValue);\n    Properties.Set(realm, subClass, \"prototype\", newPrototype, true);\n    Properties.Set(realm, newPrototype, \"constructor\", subClass, true);\n    Properties.Set(realm, subClass, \"__superConstructor__\", superClass, true);\n\n    return superClass;\n  });\n  babelHelpersValue.defineNativeProperty(\"inherits\", inheritsValue, {\n    writable: false,\n    enumerable: false,\n    configurable: true,\n  });\n  inheritsValue.intrinsicName = `babelHelpers.inherits`;\n\n  const createObjectWithoutProperties = (obj: ObjectValue, keys: ArrayValue) => {\n    let removeKeys = new Set();\n    forEachArrayValue(realm, keys, key => {\n      if (key instanceof StringValue || key instanceof NumberValue) {\n        removeKeys.add(key.value);\n      }\n    });\n    let newObject = Create.ObjectCreate(realm, realm.intrinsics.ObjectPrototype);\n    for (let [propName, binding] of obj.properties) {\n      if (!removeKeys.has(propName)) {\n        if (binding && binding.descriptor && binding.descriptor.throwIfNotConcrete(realm).enumerable) {\n          let value = Get(realm, obj, propName);\n          Properties.Set(realm, newObject, propName, value, true);\n        }\n      }\n    }\n    return newObject;\n  };\n\n  //babelHelpers.objectWithoutProperties\n  let objectWithoutPropertiesValue = new NativeFunctionValue(\n    realm,\n    undefined,\n    `objectWithoutProperties`,\n    2,\n    (context, [obj, keys]) => {\n      invariant(obj instanceof ObjectValue || obj instanceof AbstractObjectValue || obj instanceof AbstractValue);\n      invariant(keys instanceof ArrayValue);\n      if (obj.mightBeObject() && ((obj instanceof AbstractValue && obj.values.isTop()) || obj.isPartialObject())) {\n        let temporalArgs = [objectWithoutPropertiesValue, obj, keys];\n        let temporalConfig = { skipInvariant: true, isPure: true };\n        let value = AbstractValue.createTemporalFromBuildFunction(\n          realm,\n          ObjectValue,\n          temporalArgs,\n          createOperationDescriptor(\"BABEL_HELPERS_OBJECT_WITHOUT_PROPERTIES\"),\n          temporalConfig\n        );\n        invariant(value instanceof AbstractObjectValue);\n        if (obj instanceof ObjectValue) {\n          let template = createObjectWithoutProperties(obj, keys);\n          value.values = new ValuesDomain(template);\n        }\n        // as we are returning an abstract object, we mark it as simple\n        value.makeSimple();\n        return value;\n      } else {\n        invariant(obj instanceof ObjectValue);\n        return createObjectWithoutProperties(obj, keys);\n      }\n    }\n  );\n  babelHelpersValue.defineNativeProperty(\"objectWithoutProperties\", objectWithoutPropertiesValue, {\n    writable: false,\n    enumerable: false,\n    configurable: true,\n  });\n  objectWithoutPropertiesValue.intrinsicName = `babelHelpers.objectWithoutProperties`;\n\n  //babelHelpers.taggedTemplateLiteralLoose\n  let taggedTemplateLiteralLooseValue = new NativeFunctionValue(\n    realm,\n    undefined,\n    `taggedTemplateLiteralLoose`,\n    2,\n    (context, [strings, raw]) => {\n      invariant(strings instanceof ObjectValue);\n      Properties.Set(realm, strings, \"raw\", raw, true);\n      return strings;\n    }\n  );\n  babelHelpersValue.defineNativeProperty(\"taggedTemplateLiteralLoose\", taggedTemplateLiteralLooseValue, {\n    writable: false,\n    enumerable: false,\n    configurable: true,\n  });\n  taggedTemplateLiteralLooseValue.intrinsicName = `babelHelpers.taggedTemplateLiteralLoose`;\n\n  //babelHelpers.extends & babelHelpers._extends\n  babelHelpersValue.defineNativeProperty(\"extends\", objectAssign, {\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  });\n\n  babelHelpersValue.defineNativeProperty(\"_extends\", objectAssign, {\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  });\n\n  //babelHelpers.bind\n  let functionBind = Get(realm, realm.intrinsics.FunctionPrototype, \"bind\");\n\n  babelHelpersValue.defineNativeProperty(\"bind\", functionBind, {\n    writable: true,\n    enumerable: true,\n    configurable: true,\n  });\n\n  global.$DefineOwnProperty(\n    \"babelHelpers\",\n    new PropertyDescriptor({\n      value: babelHelpersValue,\n      writable: true,\n      enumerable: true,\n      configurable: true,\n    })\n  );\n  babelHelpersValue.refuseSerialization = false;\n}\n\nfunction createMagicGlobalFunction(realm: Realm, global: ObjectValue | AbstractObjectValue, functionName: string) {\n  global.$DefineOwnProperty(\n    functionName,\n    new PropertyDescriptor({\n      value: new NativeFunctionValue(realm, functionName, functionName, 0, (context, args) => {\n        let val = AbstractValue.createTemporalFromBuildFunction(\n          realm,\n          FunctionValue,\n          [new StringValue(realm, functionName), ...args],\n          createOperationDescriptor(\"FB_MOCKS_MAGIC_GLOBAL_FUNCTION\"),\n          { skipInvariant: true, isPure: true }\n        );\n        invariant(val instanceof AbstractValue);\n        return val;\n      }),\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    })\n  );\n}\n\nfunction createMagicGlobalObject(realm: Realm, global: ObjectValue | AbstractObjectValue, objectName: string) {\n  let globalObject = AbstractValue.createAbstractObject(realm, objectName);\n  globalObject.kind = \"resolved\";\n\n  global.$DefineOwnProperty(\n    objectName,\n    new PropertyDescriptor({\n      value: globalObject,\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    })\n  );\n}\n\nfunction createBootloader(realm: Realm, global: ObjectValue | AbstractObjectValue) {\n  let bootloader = new ObjectValue(realm, realm.intrinsics.ObjectPrototype);\n\n  let loadModules = new NativeFunctionValue(realm, \"loadModules\", \"loadModules\", 1, (context, args) => {\n    invariant(context.$Realm.generator);\n    let val = AbstractValue.createTemporalFromBuildFunction(\n      realm,\n      FunctionValue,\n      args,\n      createOperationDescriptor(\"FB_MOCKS_BOOTLOADER_LOAD_MODULES\"),\n      { skipInvariant: true }\n    );\n    invariant(val instanceof AbstractValue);\n    return val;\n  });\n\n  Properties.Set(realm, bootloader, \"loadModules\", loadModules, false);\n\n  global.$DefineOwnProperty(\n    \"Bootloader\",\n    new PropertyDescriptor({\n      value: bootloader,\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    })\n  );\n\n  return AbstractValue.createAbstractObject(realm, \"Bootloader\", bootloader);\n}\n\nexport function createFbMocks(realm: Realm, global: ObjectValue | AbstractObjectValue): void {\n  global.$DefineOwnProperty(\n    \"__DEV__\",\n    new PropertyDescriptor({\n      // TODO: we'll likely want to make this configurable from the outside.\n      value: realm.intrinsics.false,\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    })\n  );\n\n  createBabelHelpers(realm, global);\n\n  for (let functionName of fbMagicGlobalFunctions) {\n    createMagicGlobalFunction(realm, global, functionName);\n  }\n\n  for (let objectName of fbMagicGlobalObjects) {\n    createMagicGlobalObject(realm, global, objectName);\n  }\n  createBootloader(realm, global);\n}\n"],"file":"fb-mocks.js"}