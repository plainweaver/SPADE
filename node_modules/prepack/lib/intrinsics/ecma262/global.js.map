{"version":3,"sources":["../../../src/intrinsics/ecma262/global.js"],"names":["realm","global","$GlobalObject","$DefineOwnProperty","PropertyDescriptor","value","writable","enumerable","configurable","name","intrinsics","typeNames","isCompatibleWith","MOBILE_JSC_VERSION","concat"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow strict-local */\n\nimport type { Realm } from \"../../realm.js\";\nimport invariant from \"../../invariant.js\";\nimport { PropertyDescriptor } from \"../../descriptors.js\";\n\nexport default function(realm: Realm): void {\n  let global = realm.$GlobalObject;\n\n  global.$DefineOwnProperty(\n    \"global\",\n    new PropertyDescriptor({\n      value: global,\n      writable: true,\n      enumerable: false,\n      configurable: true,\n    })\n  );\n\n  for (let name of [\"undefined\", \"NaN\", \"Infinity\"]) {\n    global.$DefineOwnProperty(\n      name,\n      new PropertyDescriptor({\n        value: realm.intrinsics[name],\n        writable: false,\n        enumerable: false,\n        configurable: false,\n      })\n    );\n  }\n  let typeNames = [\n    \"String\",\n    \"Object\",\n    \"Function\",\n    \"Array\",\n    \"Number\",\n    \"RegExp\",\n    \"Date\",\n    \"Math\",\n    \"Error\",\n    \"Function\",\n    \"TypeError\",\n    \"RangeError\",\n    \"ReferenceError\",\n    \"SyntaxError\",\n    \"URIError\",\n    \"EvalError\",\n    \"Boolean\",\n    \"DataView\",\n    \"Float32Array\",\n    \"Float64Array\",\n    \"Int8Array\",\n    \"Int16Array\",\n    \"Int32Array\",\n    \"Map\",\n    \"Set\",\n    \"WeakMap\",\n    \"Uint8Array\",\n    \"Uint8ClampedArray\",\n    \"Uint16Array\",\n    \"Uint32Array\",\n    \"ArrayBuffer\",\n    \"JSON\",\n  ];\n  if (!realm.isCompatibleWith(realm.MOBILE_JSC_VERSION) && !realm.isCompatibleWith(\"mobile\"))\n    typeNames = typeNames.concat(\"Symbol\", \"Promise\", \"WeakSet\", \"Proxy\", \"Reflect\");\n  for (let name of typeNames) {\n    // need to check if the property exists (it may not due to --compatibility)\n    if (realm.intrinsics[name]) {\n      global.$DefineOwnProperty(\n        name,\n        new PropertyDescriptor({\n          value: realm.intrinsics[name],\n          writable: true,\n          enumerable: false,\n          configurable: true,\n        })\n      );\n    } else {\n      invariant(\n        name === \"Symbol\" || name === \"Promise\" || name === \"WeakSet\" || name === \"Proxy\" || name === \"Reflect\"\n      );\n      invariant(realm.isCompatibleWith(realm.MOBILE_JSC_VERSION) || realm.isCompatibleWith(\"mobile\"));\n    }\n  }\n  for (let name of [\n    \"parseFloat\",\n    \"parseInt\",\n    \"console\",\n    \"isNaN\",\n    \"eval\",\n    \"isFinite\",\n    \"encodeURI\",\n    \"decodeURI\",\n    \"encodeURIComponent\",\n    \"decodeURIComponent\",\n  ]) {\n    global.$DefineOwnProperty(\n      name,\n      new PropertyDescriptor({\n        value: realm.intrinsics[name],\n        writable: true,\n        enumerable: false,\n        configurable: true,\n      })\n    );\n  }\n}\n"],"file":"global.js"}