{"version":3,"sources":["../../../src/intrinsics/ecma262/parseInt.js"],"names":["ToDigit","ch","charCodeAt","undefined","realm","NativeFunctionValue","context","string","radix","inputString","To","ToStringPartial","S","trim","sign","charAt","substr","R","ToInt32","stripPrefix","intrinsics","NaN","length","Z","i","digit","mathInt","negativeZero","zero","number","Number","NumberValue"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2017-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n/* @flow strict-local */\n\nimport type { Realm } from \"../../realm.js\";\nimport { NativeFunctionValue } from \"../../values/index.js\";\nimport { NumberValue } from \"../../values/index.js\";\nimport { To } from \"../../singletons.js\";\n\nfunction ToDigit(ch: string): number | void {\n  if (ch >= \"0\" && ch <= \"9\") {\n    return ch.charCodeAt(0) - \"0\".charCodeAt(0);\n  } else if (ch >= \"A\" && ch <= \"Z\") {\n    return 10 + ch.charCodeAt(0) - \"A\".charCodeAt(0);\n  } else if (ch >= \"a\" && ch <= \"z\") {\n    return 10 + ch.charCodeAt(0) - \"a\".charCodeAt(0);\n  }\n  return undefined;\n}\n\nexport default function(realm: Realm): NativeFunctionValue {\n  return new NativeFunctionValue(\n    realm,\n    \"parseInt\",\n    \"parseInt\",\n    2,\n    (context, [string, radix]) => {\n      // 1. Let inputString be ? ToString(string).\n      let inputString = To.ToStringPartial(realm, string);\n\n      // 2. Let S be a newly created substring of inputString consisting of the first code unit that is not a StrWhiteSpaceChar and all code units following that code unit. (In other words, remove leading white space.) If inputString does not contain any such code unit, let S be the empty string.\n      let S = inputString.trim();\n\n      // 3. Let sign be 1.\n      let sign = 1;\n\n      // 4. If S is not empty and the first code unit of S is 0x002D (HYPHEN-MINUS), let sign be -1.\n      if (S !== \"\" && S.charAt(0) === \"-\") sign = -1;\n\n      // 5. If S is not empty and the first code unit of S is 0x002B (PLUS SIGN) or 0x002D (HYPHEN-MINUS), remove the first code unit from S.\n      if (S !== \"\" && (S.charAt(0) === \"-\" || S.charAt(0) === \"+\")) S = S.substr(1);\n\n      // 6. Let R be ? ToInt32(radix).\n      let R = To.ToInt32(realm, radix);\n\n      // 7. Let stripPrefix be true.\n      let stripPrefix = true;\n\n      // 8. If R ≠ 0, then\n      if (R !== 0) {\n        // a. If R < 2 or R > 36, return NaN.\n        if (R < 2 || R > 36) return realm.intrinsics.NaN;\n\n        // b .If R ≠ 16, let stripPrefix be false.\n        if (R !== 16) stripPrefix = false;\n      } else {\n        // 9. Else R = 0,\n        // a. Let R be 10.\n        R = 10;\n      }\n\n      // 10. If stripPrefix is true, then\n      if (stripPrefix === true) {\n        // a. If the length of S is at least 2 and the first two code units of S are either \"0x\" or \"0X\", remove the first two code units from S and let R be 16.\n        if (S.length >= 2 && S.charAt(0) === \"0\" && (S.charAt(1) === \"x\" || S.charAt(1) === \"X\")) {\n          S = S.substr(2);\n          R = 16;\n        }\n      }\n\n      // 11. If S contains a code unit that is not a radix-R digit, let Z be the substring of S consisting of all code units before the first such code unit; otherwise, let Z be S.\n      let Z = \"\";\n      for (let i = 0; i < S.length; ++i) {\n        let digit = ToDigit(S.charAt(i));\n        if (digit === undefined || digit >= R) {\n          break;\n        }\n        Z = Z + S.charAt(i);\n      }\n\n      // 12. If Z is empty, return NaN.\n      if (Z === \"\") return realm.intrinsics.NaN;\n\n      // 13. Let mathInt be the mathematical integer value that is represented by Z in radix-R notation, using the letters A-Z and a-z for digits with values 10 through 35. (However, if R is 10 and Z contains more than 20 significant digits, every significant digit after the 20th may be replaced by a 0 digit, at the option of the implementation; and if R is not 2, 4, 8, 10, 16, or 32, then mathInt may be an implementation-dependent approximation to the mathematical integer value that is represented by Z in radix-R notation.)\n      let mathInt = 0;\n      for (let i = 0; i < Z.length; ++i) {\n        mathInt = mathInt * R + (ToDigit(Z.charAt(i)) || 0);\n      }\n\n      // 14. If mathInt = 0, then\n      if (mathInt === 0) {\n        // a. If sign = -1, return -0.\n        if (sign === -1) return realm.intrinsics.negativeZero;\n        // b. Return +0.\n        return realm.intrinsics.zero;\n      }\n\n      // 15. Let number be the Number value for mathInt.\n      let number = Number(mathInt);\n\n      // 5. Return sign × number.\n      return new NumberValue(realm, sign * number);\n    },\n    false\n  );\n}\n"],"file":"parseInt.js"}