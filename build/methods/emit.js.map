{"version":3,"sources":["../../src/methods/emit.js"],"names":["emit","eventName","data","result","storageForLogs","emission","putWithAutoKey","JSON","stringify","arguments","emitted_at","getDate","listeners","call","resolution","resolved_at","e","console","log","rejection","rejected_at","reason"],"mappings":";;;;;;;AAAA;;;;;;AAEA,eAAeA,IAAf,CAAoBC,SAApB,EAA+B,GAAGC,IAAlC,EAAwC;AACtC,MAAIC,MAAJ;;AAEA,MAAI;AACF,UAAM,KAAKC,cAAL,CAAoBC,QAApB,CAA6BC,cAA7B,CAA4CC,IAAI,CAACC,SAAL,CAAe;AAC/DP,MAAAA,SAAS,EAAEA,SADoD;AAE/DQ,MAAAA,SAAS,EAAEP,IAFoD;AAG/DQ,MAAAA,UAAU,EAAE,KAAKC,OAAL;AAHmD,KAAf,CAA5C,CAAN;AAMAR,IAAAA,MAAM,GAAG,MAAMS,SAAS,CAACX,SAAD,CAAT,CAAqBY,IAArB,CAA0B,IAA1B,EAAgC,GAAGX,IAAnC,CAAf;AAEA,UAAM,KAAKE,cAAL,CAAoBU,UAApB,CAA+BR,cAA/B,CAA8CC,IAAI,CAACC,SAAL,CAAe;AACjEP,MAAAA,SAAS,EAAEA,SADsD;AAEjEE,MAAAA,MAFiE;AAGjEY,MAAAA,WAAW,EAAE,KAAKJ,OAAL;AAHoD,KAAf,CAA9C,CAAN;AAKD,GAdD,CAcE,OAAOK,CAAP,EAAU;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,UAAM,KAAKZ,cAAL,CAAoBe,SAApB,CAA8Bb,cAA9B,CAA6CC,IAAI,CAACC,SAAL,CAAe;AAChEP,MAAAA,SAAS,EAAEA,SADqD;AAEhEmB,MAAAA,WAAW,EAAE,KAAKT,OAAL,EAFmD;AAGhEU,MAAAA,MAAM,EAAEL;AAHwD,KAAf,CAA7C,CAAN;AAKD;;AAED,SAAOb,MAAP;AACD;;eAEcH,I","sourcesContent":["import * as listeners from '../listeners/index';\n\nasync function emit(eventName, ...data) {\n  let result;\n\n  try {\n    await this.storageForLogs.emission.putWithAutoKey(JSON.stringify({\n      eventName: eventName,\n      arguments: data,\n      emitted_at: this.getDate(),\n    }));\n\n    result = await listeners[eventName].call(this, ...data);\n\n    await this.storageForLogs.resolution.putWithAutoKey(JSON.stringify({\n      eventName: eventName,\n      result,\n      resolved_at: this.getDate(),\n    }));\n  } catch (e) {\n    console.log(e);\n    await this.storageForLogs.rejection.putWithAutoKey(JSON.stringify({\n      eventName: eventName,\n      rejected_at: this.getDate(),\n      reason: e,\n    }));\n  }\n\n  return result;\n}\n\nexport default emit;\n"],"file":"emit.js"}