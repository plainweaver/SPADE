{"version":3,"sources":["../../src/methods/promisify.js"],"names":["createCallback","callback","promise","Promise","resolve","reject","err","value","promisify","functionWithCallback","promisified","args","lastParameter","pop"],"mappings":";;;;;;;AAAA;AACA,SAASA,cAAT,GAA2B;AACzB,MAAIC,QAAJ;AACA,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACrDJ,IAAAA,QAAQ,GAAG,SAASA,QAAT,CAAmBK,GAAnB,EAAwBC,KAAxB,EAA+B;AACxC,UAAID,GAAJ,EAASD,MAAM,CAACC,GAAD,CAAN,CAAT,KACKF,OAAO,CAACG,KAAD,CAAP;AACN,KAHD;AAID,GALe,CAAhB;AAMAN,EAAAA,QAAQ,CAACC,OAAT,GAAmBA,OAAnB;AACA,SAAOD,QAAP;AACD;AAED;;;;;;AAIe,SAASO,SAAT,CAAmBC,oBAAnB,EAAyC;AACtD,SAAO,SAASC,WAAT,CAAqB,GAAGC,IAAxB,EAA8B;AACnC,QAAIV,QAAJ;AACA,QAAIC,OAAJ;AAEA,UAAMU,aAAa,GAAGD,IAAI,CAACE,GAAL,EAAtB;;AACA,QAAI,OAAOD,aAAP,KAAyB,UAA7B,EAAyC;AACvCX,MAAAA,QAAQ,GAAGW,aAAX;AACD;;AAED,QAAI,CAACX,QAAL,EAAe;AACbA,MAAAA,QAAQ,GAAGD,cAAc,EAAzB;AACAE,MAAAA,OAAO,GAAGD,QAAQ,CAACC,OAAnB;AACD;;AAEDO,IAAAA,oBAAoB,CAAC,GAAGE,IAAJ,EAAUV,QAAV,CAApB;AAEA,WAAOC,OAAP;AACD,GAjBD;AAkBD","sourcesContent":["// make callback function to support promise as well.\nfunction createCallback () {\n  let callback;\n  const promise = new Promise(function (resolve, reject) {\n    callback = function callback (err, value) {\n      if (err) reject(err);\n      else resolve(value)\n    }\n  });\n  callback.promise = promise;\n  return callback;\n}\n\n/**\n * Promisifies a function which takes the last argument as a callback.\n * @param functionWithCallback\n */\nexport default function promisify(functionWithCallback) {\n  return function promisified(...args) {\n    let callback;\n    let promise;\n\n    const lastParameter = args.pop();\n    if (typeof lastParameter === 'function') {\n      callback = lastParameter;\n    }\n\n    if (!callback) {\n      callback = createCallback();\n      promise = callback.promise;\n    }\n\n    functionWithCallback(...args, callback);\n\n    return promise;\n  }\n}\n"],"file":"promisify.js"}